<BlockSwitcher>

<Block name="Async/Await">

```swift
let p = Post.keys
do {
    let result = try await Amplify.DataStore.query(Post.self,
                                                   where: p.rating == nil || p.status == PostStatus.draft)
    // result of type [Post]
    print("Posts in draft or without rating: \(result)")
} catch {
    print("Error listing posts - \(error)")
}
```

</Block>

<Block name="Combine">

```swift
let p = Post.keys
let sink = Amplify.Publisher.create {
    try await Amplify.DataStore.query(
        Post.self,
        where: p.rating == nil || p.status == PostStatus.draft)
}.sink {
    if case let .failure(error) = $0 {
        print("Error listing posts - \(error)")
    }
}
receiveValue: { result in
    // result of type [Post]
print("Posts in draft or without rating: \(result)")
}
```

</Block>

</BlockSwitcher>
